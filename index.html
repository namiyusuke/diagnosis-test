<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style.css">
    <title>お子様の習い事診断</title>
    <style>
      .question {
        margin-bottom: 15px;
      }
      label {
        display: block;
        margin-bottom: 5px;
      }
      .results {
        margin-top: 20px;
        max-width: 800px;
        margin-inline: auto;
      }
      .score {
        font-weight: bold;
      }
      .no-result {
        color: red;
      }
    </style>
  </head>
  <body>
    <h1>お子様の習い事診断フォーム</h1>

    <form id="lessonForm">
      <h2>お子様の情報を入力してください</h2>

      <!-- お名前（ニックネーム） -->
      <label for="childName">お名前（ニックネーム）:</label>
      <input type="text" id="childName" name="childName" required>

      <!-- 性別 -->
      <label>性別:</label>
      <div class="radio-group">
        <input type="radio" id="genderMale" name="gender" value="男の子" required>
        <label for="genderMale">男の子</label>
        <input type="radio" id="genderFemale" name="gender" value="女の子">
        <label for="genderFemale">女の子</label>
      </div>

      <!-- 年齢 -->
      <label for="childAge">年齢:</label>
      <input type="number" id="childAge" name="childAge" min="0" max="18" required>

      <section class="">
        <!-- 素質診断の質問（1～35問目） -->
        <h3>素質診断</h3>
        <h4>外見的素質</h4>
       <!-- 質問1 -->
        <div class="question radio-options">
          <label>1. 周りと比べて背は高いですか？</label>
          <div class="radio-group">
            <input id="q1-1" type="radio" name="q1" value="1" required />
            <label for="q1-1">はい</label>
            <input id="q1-2" type="radio" name="q1" value="0" />
            <label for="q1-2">いいえ</label>
          </div>
        </div>
        <!-- 質問2 -->
        <div class="question">
          <label>2. 体格がいいですか？</label>
          <div class="radio-group">
            <input id="q2-1" type="radio" name="q2" value="1" required />
            <label for="q2-1">はい</label>
            <input id="q2-2" type="radio" name="q2" value="0" />
            <label for="q2-2">いいえ</label>
          </div>
        </div>
        <!-- 質問3 -->
        <div class="question">
          <label>3. 手足が長いですか？</label>
          <div class="radio-group">
            <input id="q3-1" type="radio" name="q3" value="1" required />
            <label for="q3-1">はい</label>
            <input id="q3-2" type="radio" name="q3" value="0" />
            <label for="q3-2">いいえ</label>
          </div>
        </div>
        <!-- 質問4 -->
        <div class="question radio-options">
          <label>4. 首が長いですか？</label>
            <div class="radio-group">
            <input id="q4-1" type="radio" name="q4" value="1" required />
            <label for="q4-1">はい</label>
            <input id="q4-2" type="radio" name="q4" value="0" />
            <label for="q4-2">いいえ</label>
          </div>
        </div>
        <!-- 質問5 -->
        <div class="question">
          <label>5. よく笑いますか？</label>
          <div class="radio-group">
            <input id="q5-1" type="radio" name="q5" value="1" required />
            <label for="q5-1">はい</label>
            <input id="q5-2" type="radio" name="q5" value="0" />
            <label for="q5-2">いいえ</label>
          </div>
        </div>
        <!-- 質問6 -->
        <div class="question">
          <label>6. 指が長いですか？</label>
            <div class="radio-group">
            <input id="q6-1" type="radio" name="q6" value="1" required />
            <label for="q6-1">はい</label>
            <input id="q6-2" type="radio" name="q6" value="0" />
            <label for="q6-2">いいえ</label>
          </div>
        </div>
        <!-- 質問7 -->
        <div class="question">
          <label>7. 目が大きいですか？</label>
              <div class="radio-group">
          <input id="q7-1" type="radio" name="q7" value="1" required />
          <label for="q7-1">はい</label>
            <input id="q7-2" type="radio" name="q7" value="0" />
            <label for="q7-2">いいえ</label>
          </div>
        </div>
        <!-- 質問8 -->
        <div class="question">
          <label>8. 姿勢が良いですか？</label>
              <div class="radio-group">
            <input id="q8-1" type="radio" name="q8" value="1" required />
            <label for="q8-1">はい</label>
            <input id="q8-2" type="radio" name="q8" value="0" />
            <label for="q8-2">いいえ</label>
          </div>
        </div>
        <!-- 質問9 -->
        <div class="question">
          <label>9. 声が大きいですか？</label>
          <div class="radio-group">
            <input id="q9-1" type="radio" name="q9" value="1" required />
            <label for="q9-1">はい</label>
            <input id="q9-2" type="radio" name="q9" value="0" />
            <label for="q9-2">いいえ</label>
          </div>
        </div>
        <!-- 質問10 -->
        <div class="question">
          <label>10. 表情が豊かですか？</label>
          <div class="radio-group">
            <input id="q10-1" type="radio" name="q10" value="1" required />
            <label for="q10-1">はい</label>
            <input id="q10-2" type="radio" name="q10" value="0" />
            <label for="q10-2">いいえ</label>
          </div>
        </div>

        <h4>身体的素質</h4>
        <!-- 質問11 -->
        <div class="question">
          <label>1. バランス感覚が良いですか？</label>
          <div class="radio-group">
            <input id="q11-1" type="radio" name="q11" value="1" required />
            <label for="q11-1">はい</label>
            <input id="q11-2" type="radio" name="q11" value="0" />
            <label for="q11-2">いいえ</label>
          </div>
        </div>
        <!-- 質問12 -->
        <div class="question">
          <label>2. 反射神経が良いですか？</label>
          <div class="radio-group">
            <input id="q12-1" type="radio" name="q12" value="1" required />
            <label for="q12-1">はい</label>
            <input id="q12-2" type="radio" name="q12" value="0" />
            <label for="q12-2">いいえ</label>
          </div>
        </div>
        <!-- 質問13 -->
        <div class="question">
          <label>3. スタミナがありますか？</label>
          <div class="radio-group">
            <input id="q13-1" type="radio" name="q13" value="1" required />
            <label for="q13-1">はい</label>
            <input id="q13-2" type="radio" name="q13" value="0" />
            <label for="q13-2">いいえ</label>
          </div>
        </div>
        <!-- 質問14 -->
        <div class="question">
          <label>4. 柔軟性が高いですか？</label>
          <div class="radio-group">
            <input id="q14-1" type="radio" name="q14" value="1" required />
            <label for="q14-1">はい</label>
            <input id="q14-2" type="radio" name="q14" value="0" />
            <label for="q14-2">いいえ</label>
          </div>
        </div>
        <!-- 質問15 -->
        <div class="question">
          <label>5. スポーツは得意ですか？</label>
          <div class="radio-group">
            <input id="q15-1" type="radio" name="q15" value="1" required />
            <label for="q15-1">はい</label>
            <input id="q15-2" type="radio" name="q15" value="0" />
            <label for="q15-2">いいえ</label>
          </div>
        </div>
        <!-- 質問16 -->
        <div class="question">
          <label>6. 瞬発力がありますか？</label>
          <div class="radio-group">
            <input id="q16-1" type="radio" name="q16" value="1" required />
            <label for="q16-1">はい</label>
            <input id="q16-2" type="radio" name="q16" value="0" />
            <label for="q16-2">いいえ</label>
          </div>
        </div>
        <!-- 質問17 -->
        <div class="question">
          <label>7. リズム感はいいですか？</label>
          <div class="radio-group">
            <input id="q17-1" type="radio" name="q17" value="1" required />
            <label for="q17-1">はい</label>
            <input id="q17-2" type="radio" name="q17" value="0" />
            <label for="q17-2">いいえ</label>
          </div>
        </div>
        <!-- 質問18 -->
        <div class="question">
          <label>8. 力は強いですか？</label>
          <div class="radio-group">
            <input id="q18-1" type="radio" name="q18" value="1" required />
            <label for="q18-1">はい</label>
            <input id="q18-2" type="radio" name="q18" value="0" />
            <label for="q18-2">いいえ</label>
          </div>
        </div>
        <!-- 質問19 -->
        <div class="question">
          <label>9. 機械や道具を使うのが好きですか？</label>
          <div class="radio-group">
            <input id="q19-1" type="radio" name="q19" value="1" required />
            <label for="q19-1">はい</label>
            <input id="q19-2" type="radio" name="q19" value="0" />
            <label for="q19-2">いいえ</label>
          </div>
        </div>
        <!-- 質問20 -->
        <div class="question">
          <label>10. 音感が良いですか？</label>
          <div class="radio-group">
            <input id="q20-1" type="radio" name="q20" value="1" required />
            <label for="q20-1">はい</label>
            <input id="q20-2" type="radio" name="q20" value="0" />
            <label for="q20-2">いいえ</label>
          </div>
        </div>
        <!-- 質問21 -->
        <div class="question">
          <label>11. 色彩感覚がありますか？</label>
          <div class="radio-group">
            <input id="q21-1" type="radio" name="q21" value="1" required />
            <label for="q21-1">はい</label>
            <input id="q21-2" type="radio" name="q21" value="0" />
            <label for="q21-2">いいえ</label>
          </div>
        </div>
        <!-- 質問22 -->
        <div class="question">
          <label>12. 創造力が豊かですか？</label>
          <div class="radio-group">
            <input id="q22-1" type="radio" name="q22" value="1" required />
            <label for="q22-1">はい</label>
            <input id="q22-2" type="radio" name="q22" value="0" />
            <label for="q22-2">いいえ</label>
          </div>
        </div>
        <!-- 質問23 -->
        <div class="question">
          <label>13. 表現力がありますか？</label>
          <div class="radio-group">
            <input id="q23-1" type="radio" name="q23" value="1" required />
            <label for="q23-1">はい</label>
            <input id="q23-2" type="radio" name="q23" value="0" />
            <label for="q23-2">いいえ</label>
          </div>
        </div>
        <!-- 質問24 -->
        <div class="question">
          <label>14. コミュニケーション能力が高いですか？</label>
          <div class="radio-group">
            <input id="q24-1" type="radio" name="q24" value="1" required />
            <label for="q24-1">はい</label>
            <input id="q24-2" type="radio" name="q24" value="0" />
            <label for="q24-2">いいえ</label>
          </div>
        </div>

        <!-- 頭脳的素質の質問（25～33問目） -->
        <h4>頭脳的素質</h4>
        <!-- 質問25 -->
        <div class="question">
          <label>1. 記憶力が良いですか？</label>
          <div class="radio-group">
            <input id="q25-1" type="radio" name="q25" value="1" required />
            <label for="q25-1">はい</label>
            <input id="q25-2" type="radio" name="q25" value="0" />
            <label for="q25-2">いいえ</label>
          </div>
        </div>
        <!-- 質問26 -->
        <div class="question">
          <label>2. 集中力が高いですか？</label>
          <div class="radio-group">
            <input id="q26-1" type="radio" name="q26" value="1" required />
            <label for="q26-1">はい</label>
            <input id="q26-2" type="radio" name="q26" value="0" />
            <label for="q26-2">いいえ</label>
          </div>
        </div>
        <!-- 質問27 -->
        <div class="question">
          <label>3. 国語が得意ですか？</label>
          <div class="radio-group">
            <input id="q27-1" type="radio" name="q27" value="1" required />
            <label for="q27-1">はい</label>
            <input id="q27-2" type="radio" name="q27" value="0" />
            <label for="q27-2">いいえ</label>
          </div>
        </div>
        <!-- 質問28 -->
        <div class="question">
          <label>4. 算数が得意ですか？</label>
          <div class="radio-group">
            <input id="q28-1" type="radio" name="q28" value="1" required />
            <label for="q28-1">はい</label>
            <input id="q28-2" type="radio" name="q28" value="0" />
            <label for="q28-2">いいえ</label>
          </div>
        </div>
        <!-- 質問29 -->
        <div class="question">
          <label>5. 科学に興味がありますか？</label>
          <div class="radio-group">
            <input id="q29-1" type="radio" name="q29" value="1" required />
            <label for="q29-1">はい</label>
            <input id="q29-2" type="radio" name="q29" value="0" />
            <label for="q29-2">いいえ</label>
          </div>
        </div>
        <!-- 質問30 -->
        <div class="question">
          <label>6. パズルや謎解きが好きですか？</label>
          <div class="radio-group">
            <input id="q30-1" type="radio" name="q30" value="1" required />
            <label for="q30-1">はい</label>
            <input id="q30-2" type="radio" name="q30" value="0" />
            <label for="q30-2">いいえ</label>
          </div>
        </div>
        <!-- 質問31 -->
        <div class="question">
          <label>7. プログラミングやロボットに興味がありますか？</label>
          <div class="radio-group">
            <input id="q31-1" type="radio" name="q31" value="1" required />
            <label for="q31-1">はい</label>
            <input id="q31-2" type="radio" name="q31" value="0" />
            <label for="q31-2">いいえ</label>
          </div>
        </div>
        <!-- 質問32 -->
        <div class="question">
          <label>8. 読書が好きですか？</label>
          <div class="radio-group">
            <input id="q32-1" type="radio" name="q32" value="1" required />
            <label for="q32-1">はい</label>
            <input id="q32-2" type="radio" name="q32" value="0" />
            <label for="q32-2">いいえ</label>
          </div>
        </div>
        <!-- 質問33 -->
        <div class="question">
          <label>9. 自分の気持ちを言葉で伝えられますか？</label>
          <div class="radio-group">
            <input id="q33-1" type="radio" name="q33" value="1" required />
            <label for="q33-1">はい</label>
            <input id="q33-2" type="radio" name="q33" value="0" />
            <label for="q33-2">いいえ</label>
          </div>
        </div>
      </section>

      <!-- 気質診断の質問（36～45問目） -->
      <h3>気質診断</h3>
      <!-- ビッグファイブ性格特性の質問 -->

       <div class="question">
          <p>1. 新しいことに興味を持ちますか？（1～5で評価）</p>
          <select id="q34" name="q34" required>
            <option value="">選択してください</option>
            <option value="1">1（まったく当てはまらない）</option>
            <option value="2">2（やや当てはまらない）</option>
            <option value="3">3（どちらともいえない）</option>
            <option value="4">4（やや当てはまる）</option>
            <option value="5">5（非常に当てはまる）</option>
          </select>
        </div>

        <!-- 質問35 -->
        <div class="question">
          <p>2. 計画的に行動しますか？（1～5で評価）</p>
          <select id="q35" name="q35" required>
            <option value="">選択してください</option>
            <option value="1">1（まったく当てはまらない）</option>
            <option value="2">2（やや当てはまらない）</option>
            <option value="3">3（どちらともいえない）</option>
            <option value="4">4（やや当てはまる）</option>
            <option value="5">5（非常に当てはまる）</option>
          </select>
        </div>

        <!-- 質問36 -->
        <div class="question">
          <p>3. 感情の起伏が少ないですか？（1～5で評価）</p>
          <select id="q36" name="q36" required>
            <option value="">選択してください</option>
            <option value="1">1（まったく当てはまらない）</option>
            <option value="2">2（やや当てはまらない）</option>
            <option value="3">3（どちらともいえない）</option>
            <option value="4">4（やや当てはまる）</option>
            <option value="5">5（非常に当てはまる）</option>
          </select>
        </div>

        <!-- 質問37 -->
        <div class="question">
          <p>4. 社交的ですか？（1～5で評価）</p>
          <select id="q37" name="q37" required>
            <option value="">選択してください</option>
            <option value="1">1（まったく当てはまらない）</option>
            <option value="2">2（やや当てはまらない）</option>
            <option value="3">3（どちらともいえない）</option>
            <option value="4">4（やや当てはまる）</option>
            <option value="5">5（非常に当てはまる）</option>
          </select>
        </div>

        <!-- 質問38 -->
        <div class="question">
          <p>5. 他人に思いやりを持ちますか？（1～5で評価）</p>
          <select id="q38" name="q38" required>
            <option value="">選択してください</option>
            <option value="1">1（まったく当てはまらない）</option>
            <option value="2">2（やや当てはまらない）</option>
            <option value="3">3（どちらともいえない）</option>
            <option value="4">4（やや当てはまる）</option>
            <option value="5">5（非常に当てはまる）</option>
          </select>
        </div>

        <!-- 質問39 -->
        <div class="question">
          <p>6. 新しいことに積極的に挑戦しますか？（1～5で評価）</p>
          <select id="q39" name="q39" required>
            <option value="">選択してください</option>
            <option value="1">1（まったく当てはまらない）</option>
            <option value="2">2（やや当てはまらない）</option>
            <option value="3">3（どちらともいえない）</option>
            <option value="4">4（やや当てはまる）</option>
            <option value="5">5（非常に当てはまる）</option>
          </select>
        </div>

        <!-- 質問40 -->
        <div class="question">
          <p>7. リーダーシップを発揮しますか？（1～5で評価）</p>
          <select id="q40" name="q40" required>
            <option value="">選択してください</option>
            <option value="1">1（まったく当てはまらない）</option>
            <option value="2">2（やや当てはまらない）</option>
            <option value="3">3（どちらともいえない）</option>
            <option value="4">4（やや当てはまる）</option>
            <option value="5">5（非常に当てはまる）</option>
          </select>
        </div>

        <!-- 質問41 -->
        <div class="question">
          <p>8. 協調性がありますか？（1～5で評価）</p>
          <select id="q41" name="q41" required>
            <option value="">選択してください</option>
            <option value="1">1（まったく当てはまらない）</option>
            <option value="2">2（やや当てはまらない）</option>
            <option value="3">3（どちらともいえない）</option>
            <option value="4">4（やや当てはまる）</option>
            <option value="5">5（非常に当てはまる）</option>
          </select>
        </div>

        <!-- 質問42 -->
        <div class="question">
          <p>9. ストレスに強いですか？（1～5で評価）</p>
          <select id="q42" name="q42" required>
            <option value="">選択してください</option>
            <option value="1">1（まったく当てはまらない）</option>
            <option value="2">2（やや当てはまらない）</option>
            <option value="3">3（どちらともいえない）</option>
            <option value="4">4（やや当てはまる）</option>
            <option value="5">5（非常に当てはまる）</option>
          </select>
        </div>

        <!-- 質問43 -->
        <div class="question">
          <p>10. 自主的に行動しますか？（1～5で評価）</p>
          <select id="q43" name="q43" required>
            <option value="">選択してください</option>
            <option value="1">1（まったく当てはまらない）</option>
            <option value="2">2（やや当てはまらない）</option>
            <option value="3">3（どちらともいえない）</option>
            <option value="4">4（やや当てはまる）</option>
            <option value="5">5（非常に当てはまる）</option>
          </select>
        </div>

      <!-- 才能診断の質問（46～65問目） -->
      <h3>才能診断</h3>

    <!-- 質問44 -->
        <div class="question">
          <p>1. 問題を解くのが得意ですか？（1～5で評価）</p>
          <select id="q44" name="q44" required>
            <option value="">選択してください</option>
            <option value="1">1（まったく当てはまらない）</option>
            <option value="2">2（やや当てはまらない）</option>
            <option value="3">3（どちらともいえない）</option>
            <option value="4">4（やや当てはまる）</option>
            <option value="5">5（非常に当てはまる）</option>
          </select>
        </div>

        <!-- 質問45 -->
        <div class="question">
          <p>2. 物事の仕組みに興味を持ちますか？（1～5で評価）</p>
          <select id="q45" name="q45" required>
            <option value="">選択してください</option>
            <option value="1">1（まったく当てはまらない）</option>
            <option value="2">2（やや当てはまらない）</option>
            <option value="3">3（どちらともいえない）</option>
            <option value="4">4（やや当てはまる）</option>
            <option value="5">5（非常に当てはまる）</option>
          </select>
        </div>

        <!-- 質問46 -->
        <div class="question">
          <p>3. 情報をきちんとまとめるのは得意ですか？（1～5で評価）</p>
          <select id="q46" name="q46" required>
            <option value="">選択してください</option>
            <option value="1">1（まったく当てはまらない）</option>
            <option value="2">2（やや当てはまらない）</option>
            <option value="3">3（どちらともいえない）</option>
            <option value="4">4（やや当てはまる）</option>
            <option value="5">5（非常に当てはまる）</option>
          </select>
        </div>

        <!-- 質問47 -->
        <div class="question">
          <p>4. 楽しいことを思いつくのは得意ですか？（1～5で評価）</p>
          <select id="q47" name="q47" required>
            <option value="">選択してください</option>
            <option value="1">1（まったく当てはまらない）</option>
            <option value="2">2（やや当てはまらない）</option>
            <option value="3">3（どちらともいえない）</option>
            <option value="4">4（やや当てはまる）</option>
            <option value="5">5（非常に当てはまる）</option>
          </select>
        </div>

        <!-- 質問48 -->
        <div class="question">
          <p>5. 創造的な活動（例：絵を描く、物語を書く）が好きですか？（1～5で評価）</p>
          <select id="q48" name="q48" required>
            <option value="">選択してください</option>
            <option value="1">1（まったく当てはまらない）</option>
            <option value="2">2（やや当てはまらない）</option>
            <option value="3">3（どちらともいえない）</option>
            <option value="4">4（やや当てはまる）</option>
            <option value="5">5（非常に当てはまる）</option>
          </select>
        </div>

        <!-- 質問49 -->
        <div class="question">
          <p>6. 手先が器用ですか？（1～5で評価）</p>
          <select id="q49" name="q49" required>
            <option value="">選択してください</option>
            <option value="1">1（まったく当てはまらない）</option>
            <option value="2">2（やや当てはまらない）</option>
            <option value="3">3（どちらともいえない）</option>
            <option value="4">4（やや当てはまる）</option>
            <option value="5">5（非常に当てはまる）</option>
          </select>
        </div>

        <!-- 質問50 -->
        <div class="question">
          <p>7. 細かい作業が得意ですか？（1～5で評価）</p>
          <select id="q50" name="q50" required>
            <option value="">選択してください</option>
            <option value="1">1（まったく当てはまらない）</option>
            <option value="2">2（やや当てはまらない）</option>
            <option value="3">3（どちらともいえない）</option>
            <option value="4">4（やや当てはまる）</option>
            <option value="5">5（非常に当てはまる）</option>
          </select>
        </div>

        <!-- 質問51 -->
        <div class="question">
          <p>8. 音楽を聴くのが好きですか？（1～5で評価）</p>
          <select id="q51" name="q51" required>
            <option value="">選択してください</option>
            <option value="1">1（まったく当てはまらない）</option>
            <option value="2">2（やや当てはまらない）</option>
            <option value="3">3（どちらともいえない）</option>
            <option value="4">4（やや当てはまる）</option>
            <option value="5">5（非常に当てはまる）</option>
          </select>
        </div>

        <!-- 質問52 -->
        <div class="question">
          <p>9. いろんな音の違いに気づけますか？（1～5で評価）</p>
          <select id="q52" name="q52" required>
            <option value="">選択してください</option>
            <option value="1">1（まったく当てはまらない）</option>
            <option value="2">2（やや当てはまらない）</option>
            <option value="3">3（どちらともいえない）</option>
            <option value="4">4（やや当てはまる）</option>
            <option value="5">5（非常に当てはまる）</option>
          </select>
        </div>

        <!-- 質問53 -->
        <div class="question">
          <p>10. リズム感がありますか？（1～5で評価）</p>
          <select id="q53" name="q53" required>
            <option value="">選択してください</option>
            <option value="1">1（まったく当てはまらない）</option>
            <option value="2">2（やや当てはまらない）</option>
            <option value="3">3（どちらともいえない）</option>
            <option value="4">4（やや当てはまる）</option>
            <option value="5">5（非常に当てはまる）</option>
          </select>
        </div>

        <!-- 質問54 -->
        <div class="question">
          <p>11. ダンスやリズム遊びが好きですか？（1～5で評価）</p>
          <select id="q54" name="q54" required>
            <option value="">選択してください</option>
            <option value="1">1（まったく当てはまらない）</option>
            <option value="2">2（やや当てはまらない）</option>
            <option value="3">3（どちらともいえない）</option>
            <option value="4">4（やや当てはまる）</option>
            <option value="5">5（非常に当てはまる）</option>
          </select>
        </div>

        <!-- 質問55 -->
        <div class="question">
          <p>12. お絵描きや塗り絵は好きですか？（1～5で評価）</p>
          <select id="q55" name="q55" required>
            <option value="">選択してください</option>
            <option value="1">1（まったく当てはまらない）</option>
            <option value="2">2（やや当てはまらない）</option>
            <option value="3">3（どちらともいえない）</option>
            <option value="4">4（やや当てはまる）</option>
            <option value="5">5（非常に当てはまる）</option>
          </select>
        </div>

        <!-- 質問56 -->
        <div class="question">
          <p>13. 新しいことを思いつくのは得意ですか？（1～5で評価）</p>
          <select id="q56" name="q56" required>
            <option value="">選択してください</option>
            <option value="1">1（まったく当てはまらない）</option>
            <option value="2">2（やや当てはまらない）</option>
            <option value="3">3（どちらともいえない）</option>
            <option value="4">4（やや当てはまる）</option>
            <option value="5">5（非常に当てはまる）</option>
          </select>
        </div>

        <!-- 質問57 -->
        <div class="question">
          <p>14. 困った時にどうしたらいいか考えられますか？（1～5で評価）</p>
          <select id="q57" name="q57" required>
            <option value="">選択してください</option>
            <option value="1">1（まったく当てはまらない）</option>
            <option value="2">2（やや当てはまらない）</option>
            <option value="3">3（どちらともいえない）</option>
            <option value="4">4（やや当てはまる）</option>
            <option value="5">5（非常に当てはまる）</option>
          </select>
        </div>

        <!-- 質問58 -->
        <div class="question">
          <p>15. 細かい部分に気を配ることが得意ですか？（1～5で評価）</p>
          <select id="q58" name="q58" required>
            <option value="">選択してください</option>
            <option value="1">1（まったく当てはまらない）</option>
            <option value="2">2（やや当てはまらない）</option>
            <option value="3">3（どちらともいえない）</option>
            <option value="4">4（やや当てはまる）</option>
            <option value="5">5（非常に当てはまる）</option>
          </select>
        </div>

        <!-- 質問59 -->
        <div class="question">
          <p>16. 文章を書いたりお話をするのは好きですか？（1～5で評価）</p>
          <select id="q59" name="q59" required>
            <option value="">選択してください</option>
            <option value="1">1（まったく当てはまらない）</option>
            <option value="2">2（やや当てはまらない）</option>
            <option value="3">3（どちらともいえない）</option>
            <option value="4">4（やや当てはまる）</option>
            <option value="5">5（非常に当てはまる）</option>
          </select>
        </div>

        <!-- 質問60 -->
        <div class="question">
          <p>17. すぐに行動に移せますか？（1～5で評価）</p>
          <select id="q60" name="q60" required>
            <option value="">選択してください</option>
            <option value="1">1（まったく当てはまらない）</option>
            <option value="2">2（やや当てはまらない）</option>
            <option value="3">3（どちらともいえない）</option>
            <option value="4">4（やや当てはまる）</option>
            <option value="5">5（非常に当てはまる）</option>
          </select>
        </div>

        <!-- 質問61 -->
        <div class="question">
          <p>18. 長時間の運動を続けることができますか？（1～5で評価）</p>
          <select id="q61" name="q61" required>
            <option value="">選択してください</option>
            <option value="1">1（まったく当てはまらない）</option>
            <option value="2">2（やや当てはまらない）</option>
            <option value="3">3（どちらともいえない）</option>
            <option value="4">4（やや当てはまる）</option>
            <option value="5">5（非常に当てはまる）</option>
          </select>
        </div>

        <!-- 質問62 -->
        <div class="question">
          <p>19. ボールをキャッチするのが得意ですか？（1～5で評価）</p>
          <select id="q62" name="q62" required>
            <option value="">選択してください</option>
            <option value="1">1（まったく当てはまらない）</option>
            <option value="2">2（やや当てはまらない）</option>
            <option value="3">3（どちらともいえない）</option>
            <option value="4">4（やや当てはまる）</option>
            <option value="5">5（非常に当てはまる）</option>
          </select>
        </div>

        <!-- 質問63 -->
        <div class="question">
          <p>20. 友達と一緒に遊ぶのは好きですか？（1～5で評価）</p>
          <select id="q63" name="q63" required>
            <option value="">選択してください</option>
            <option value="1">1（まったく当てはまらない）</option>
            <option value="2">2（やや当てはまらない）</option>
            <option value="3">3（どちらともいえない）</option>
            <option value="4">4（やや当てはまる）</option>
            <option value="5">5（非常に当てはまる）</option>
          </select>
        </div>

        <!-- 質問64 -->
        <div class="question">
          <p>21. 運動が好きですか？（1～5で評価）</p>
          <select id="q64" name="q64" required>
            <option value="">選択してください</option>
            <option value="1">1（まったく当てはまらない）</option>
            <option value="2">2（やや当てはまらない）</option>
            <option value="3">3（どちらともいえない）</option>
            <option value="4">4（やや当てはまる）</option>
            <option value="5">5（非常に当てはまる）</option>
          </select>
        </div>

        <!-- 質問65 -->
        <div class="question">
          <p>22. 新しい友達を作るのが得意ですか？（1～5で評価）</p>
          <select id="q65" name="q65" required>
            <option value="">選択してください</option>
            <option value="1">1（まったく当てはまらない）</option>
            <option value="2">2（やや当てはまらない）</option>
            <option value="3">3（どちらともいえない）</option>
            <option value="4">4（やや当てはまる）</option>
            <option value="5">5（非常に当てはまる）</option>
          </select>
        </div>

      <!-- 以降の質問は削除済みまたは重複なし -->

      <input type="submit" value="診断結果を表示" />
    </form>
    <div id="lessonRecommendation" class="pdf-content">

    </div>
    <div class="js-result"></div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
 <script>
//   if(document.getElementById('download-button') !== null) {
//    document.getElementById('download-button').addEventListener('click', function () {
//   var element = document.querySelector('.pdf-content');
//   html2pdf().from(element).save();
// });
//   }
// フォームの送信イベントのリスナー
document.getElementById("lessonForm").addEventListener("submit", function (event) {
  event.preventDefault();
  // Download PDFボタンを追加
  const downloadButton = document.createElement("button");
  downloadButton.id = "download-button";
  downloadButton.textContent = "診断結果をPDFでダウンロード";
  document.querySelector(".js-result").appendChild(downloadButton);
    // ボタンが生成された後にイベントリスナーを設定
  downloadButton.addEventListener('click', function (){
    var element = document.querySelector('.pdf-content');
     html2pdf()
        .from(element)
        .outputPdf('datauristring')
        .then(function (pdfAsDataUri) {
          const newTab = window.open();
          newTab.document.write(
            '<iframe width="100%" height="100%" src="' + pdfAsDataUri + '"></iframe>'
          );
        });
  });
  const answers = [];
  const aptitudeCategories = new Set(); // 素質評価のカテゴリを保存するセットを追加

  // 素質診断の質問をカテゴリにマッピング
  const questionToCategory = {
    // 外見的素質
    1: "背が高い",
    2: "体が大きい",
    3: "手足が長い",
    4: "首が長い",
    5: "笑顔が魅力的",
    6: "指が長い",
    7: "目が大きい",
    8: "姿勢が良い",
    9: "声がよく通る",
    10: "表情が豊か",

    // 身体的素質
    11: "バランス感覚が良い",
    12: "反射神経が良い",
    13: "スタミナがある",
    14: "柔軟性が高い",
    15: "スポーツ全般が得意",
    16: "瞬発力がある",
    17: "リズム感がある",
    18: "力が強い",
    19: "機械や道具を使うのが得意",
    20: "音感が良い",
    21: "色彩感覚がある",
    22: "創造力が豊か",
    23: "表現力がある",
    24: "コミュニケーション能力が高い",

    // 頭脳的素質
    25: "記憶力がずば抜けて良い",
    26: "集中力がずば抜けて高い",
    27: "論理的思考が得意",
    28: "数学が得意",
    29: "科学に興味がある",
    30: "パズルや謎解きが得意",
    31: "プログラミングやロボットに興味がある",
    32: "読書が好き",
    33: "言葉の表現が得意",
  };

  // お子様の情報を取得
  const childName = document.getElementById("childName").value.trim();
  const genderRadio = document.querySelector('input[name="gender"]:checked');
  const childGender = genderRadio ? genderRadio.value : '';
  const childAge = parseInt(document.getElementById("childAge").value);

  if (!childName || !childGender || isNaN(childAge)) {
    alert("お子様の情報を正しく入力してください。");
    return;
  }

  // 素質診断の回答（1～33問目）
  for (let i = 1; i <= 33; i++) {
    const answer = document.querySelector(`input[name="q${i}"]:checked`);
    if (!answer) {
      alert("すべての素質診断の質問に回答してください。");
      return;
    }
    const answerValue = parseInt(answer.value);
    answers.push(answerValue);

    // 「はい」と答えた質問のカテゴリを収集
    if (answerValue === 1 && questionToCategory[i]) {
      aptitudeCategories.add(questionToCategory[i]);
    }
  }

  // 気質診断の回答（34～43問目）
  for (let i = 34; i <= 43; i++) {
    const answer = parseInt(document.getElementById(`q${i}`).value);
    if (isNaN(answer) || answer < 1 || answer > 5) {
      alert(`質問${i}に1～5の数値を選択してください。`);
      return;
    }
    answers.push(answer);
  }

  // 才能診断の回答（44～65問目）
  for (let i = 44; i <= 65; i++) {
    const answer = parseInt(document.getElementById(`q${i}`).value);
    if (isNaN(answer) || answer < 1 || answer > 5) {
      alert(`質問${i}に1～5の数値を選択してください。`);
      return;
    }
    answers.push(answer);
  }

  // スコアを計算
  const scores = calculateScores(answers);

  // レッスンのおすすめを生成
  const recommendations = generateLessonRecommendations(scores, childName, childGender, childAge);

  // 気質評価を生成
  const temperamentEvaluation = generateTemperamentEvaluation(scores);

  // 才能評価を生成
  const talentEvaluation = generateTalentEvaluation(scores);

  // 素質評価をシンプルに表示
  let aptitudeEvaluation = "<h3>素質の評価</h3><ul>";
  aptitudeCategories.forEach((category) => {
    aptitudeEvaluation += `<li>${category}</li>`;
  });
  aptitudeEvaluation += "</ul>";

  // 結果を表示
  document.getElementById("lessonRecommendation").innerHTML =
    aptitudeEvaluation + temperamentEvaluation + talentEvaluation + recommendations;
});

// スコアを計算する関数
function calculateScores(answers) {
  // 素質診断の回答（1～33問目）
  const aptitudeAnswers = answers.slice(0, 33);

  // 気質診断の回答（34～43問目）
  const traitAnswers = answers.slice(33, 43);

  // 才能診断の回答（44～65問目）
  const talentAnswers = answers.slice(43);

  // 素質診断のスコア計算
  const aptitudeScores = calculateAptitudeScores(aptitudeAnswers);

  // 気質診断のスコア計算
  const traitScores = calculateTraitScores(traitAnswers);

  // 素質診断のスコアを5倍して才能診断のスケールに合わせる
  for (let key in aptitudeScores) {
    aptitudeScores[key] *= 5;
  }

  // 才能診断のスコア計算
  const talentScores = calculateTalentScores(talentAnswers, aptitudeAnswers);

  // その他の才能・特性のスコア計算
  const fineMotorSkills = calculateFineMotorSkills(talentAnswers);
  const auditorySensitivity = calculateAuditorySensitivity(talentAnswers);
  const rhythmSense = calculateRhythmSense(talentAnswers);
  const innovation = calculateInnovation(talentAnswers);
  const patience = calculatePatience(talentAnswers);
  const problemSolving = calculateProblemSolving(talentAnswers);
  const attentionToDetail = calculateAttentionToDetail(talentAnswers);
  const languageAptitude = calculateLanguageAptitude(talentAnswers);
  const agility = calculateAgility(talentAnswers);
  const endurance = calculateEndurance(talentAnswers);
  const handEyeCoordination = calculateHandEyeCoordination(talentAnswers);
  const teamSpirit = calculateTeamSpirit(talentAnswers);
  const heightAdvantage = calculateHeightAdvantage(aptitudeAnswers);

  return {
    aptitudeScores,
    traitScores,
    talentScores,
    fineMotorSkills,
    auditorySensitivity,
    rhythmSense,
    innovation,
    patience,
    problemSolving,
    attentionToDetail,
    languageAptitude,
    agility,
    endurance,
    handEyeCoordination,
    teamSpirit,
    heightAdvantage,
  };
}

// 素質診断のスコア計算関数
function calculateAptitudeScores(aptitudeAnswers) {
  const categories = {
    "外見": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9],
    "身体": [10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23],
    "頭脳": [24, 25, 26, 27, 28, 29, 30, 31, 32],
  };

  const aptitudeScores = {};

  for (let category in categories) {
    let total = 0;
    categories[category].forEach((index) => {
      if (aptitudeAnswers[index] !== undefined) {
        total += aptitudeAnswers[index];
      }
    });
    aptitudeScores[category] = total;
  }

  return aptitudeScores;
}

// 気質診断のスコア計算関数
function calculateTraitScores(traitAnswers) {
  const traitScores = {
    openness: traitAnswers[0] + traitAnswers[5],           // 質問34, 39
    conscientiousness: traitAnswers[1] + traitAnswers[9],  // 質問35, 43
    emotionalStability: traitAnswers[2] + traitAnswers[8], // 質問36, 42
    extraversion: traitAnswers[3] + traitAnswers[6],       // 質問37, 40
    agreeableness: traitAnswers[4] + traitAnswers[7],      // 質問38, 41
  };
  return traitScores;
}

// 才能診断のスコア計算関数
function calculateTalentScores(talentAnswers, aptitudeAnswers) {
  const talents = {
    "STEM的才能": [0, 1, 2, 6],          // 質問44, 45, 46, 50
    "言語的才能": [4, 15],               // 質問48, 59
    "運動的才能": [16, 17, 18, 20, 21],  // 質問60, 61, 62, 64, 65
    "音楽的才能": [7, 8, 9, 10],         // 質問51, 52, 53, 54
    "アート的才能": [11, 12],            // 質問55, 56
  };
  const talentScores = {};

  for (let talent in talents) {
    let total = 0;
    talents[talent].forEach((index) => {
      total += talentAnswers[index];
    });
    talentScores[talent] = total;
  }

  // 質問6（「指が長いですか？」）を音楽的才能の評価に追加
  const question6Answer = aptitudeAnswers[5];
  talentScores["音楽的才能"] += question6Answer * 5;
  return talentScores;
}

// その他の特性スコアを計算する関数
function sumAnswers(answers, indices) {
  let total = 0;
  indices.forEach((index) => {
    total += answers[index];
  });
  return total;
}

function calculateFineMotorSkills(talentAnswers) {
  const indices = [5, 6]; // 質問49, 50
  return sumAnswers(talentAnswers, indices);
}

function calculateAuditorySensitivity(talentAnswers) {
  const indices = [7]; // 質問51
  return sumAnswers(talentAnswers, indices);
}

function calculateRhythmSense(talentAnswers) {
  const indices = [8, 9]; // 質問52, 53
  return sumAnswers(talentAnswers, indices);
}

function calculateInnovation(talentAnswers) {
  const indices = [11]; // 質問55
  return sumAnswers(talentAnswers, indices);
}

function calculatePatience(talentAnswers) {
  const indices = [12]; // 質問56
  return sumAnswers(talentAnswers, indices);
}

function calculateProblemSolving(talentAnswers) {
  const indices = [0, 2]; // 質問44, 46
  return sumAnswers(talentAnswers, indices);
}

function calculateAttentionToDetail(talentAnswers) {
  const indices = [13]; // 質問57
  return sumAnswers(talentAnswers, indices);
}

function calculateLanguageAptitude(talentAnswers) {
  const indices = [4, 15]; // 質問48, 59
  return sumAnswers(talentAnswers, indices);
}

function calculateAgility(talentAnswers) {
  const indices = [16]; // 質問60
  return sumAnswers(talentAnswers, indices);
}

function calculateEndurance(talentAnswers) {
  const indices = [17]; // 質問61
  return sumAnswers(talentAnswers, indices);
}

function calculateHandEyeCoordination(talentAnswers) {
  const indices = [18]; // 質問62
  return sumAnswers(talentAnswers, indices);
}

function calculateTeamSpirit(talentAnswers) {
  const indices = [19, 21]; // 質問63, 65
  return sumAnswers(talentAnswers, indices);
}

function calculateHeightAdvantage(aptitudeAnswers) {
  const indices = [0]; // 質問1（背が高い）
  return sumAnswers(aptitudeAnswers, indices);
}

// レッスンのおすすめを生成する関数
function generateLessonRecommendations(scores, childName, childGender, childAge) {
  const lessons = [
    // 自己競争のスポーツ
    {
      name: "陸上競技",
      criteria: function (scores) {
        return calculateLessonScore(scores, {
          physicalTalent: 20,
          endurance: 10,
          agility: 10,
        });
      },
      reason: "体力や持久力があり、素早い動きが得意なお子様におすすめです。",
    },
    {
      name: "水泳",
      criteria: function (scores) {
        return calculateLessonScore(scores, {
          physicalTalent: 20,
          endurance: 10,
        });
      },
      reason: "体力とスタミナがあり、水中での運動が好きなお子様に適しています。",
    },
    {
      name: "体操",
      criteria: function (scores) {
        return calculateLessonScore(scores, {
          physicalTalent: 20,
          handEyeCoordination: 10,
          agility: 10,
        });
      },
      reason: "柔軟性が高く、バランス感覚に優れたお子様に最適です。",
    },
    {
      name: "新体操",
      criteria: function (scores) {
        return calculateLessonScore(scores, {
          physicalTalent: 20,
          handEyeCoordination: 10,
          agility: 10,
          rhythmSense: 10,
        });
      },
      reason: "リズム感と柔軟性があり、表現力豊かなお子様におすすめです。",
    },
    {
      name: "テニス",
      criteria: function (scores) {
        return calculateLessonScore(scores, {
          physicalTalent: 20,
          handEyeCoordination: 10,
          agility: 10,
        });
      },
      reason: "手と目の協調性が高く、素早い反応が得意なお子様に適しています。",
    },
    // ガチ競争のスポーツ
    {
      name: "柔道",
      criteria: function (scores) {
        return calculateLessonScore(scores, {
          physicalTalent: 20,
          endurance: 10,
        });
      },
      reason: "体力と精神力があり、礼儀を重んじるお子様に適しています。",
    },
    {
      name: "空手",
      criteria: function (scores) {
        return calculateLessonScore(scores, {
          physicalTalent: 20,
          handEyeCoordination: 10,
          endurance: 10,
        });
      },
      reason: "集中力と反射神経が高く、礼節を大切にするお子様におすすめです。",
    },
    // 集団競争のスポーツ
    {
      name: "サッカー",
      criteria: function (scores) {
        return calculateLessonScore(scores, {
          physicalTalent: 20,
          teamSpirit: 10,
          agility: 10,
          endurance: 10,
        });
      },
      reason: "チームワークが好きで、素早い動きとスタミナがあるお子様に適しています。",
    },
    {
      name: "バスケットボール",
      criteria: function (scores) {
        return calculateLessonScore(scores, {
          physicalTalent: 20,
          teamSpirit: 10,
          agility: 10,
          heightAdvantage: 5,
        });
      },
      reason: "身長を活かし、チームプレイが得意なお子様におすすめです。",
    },
    // 音楽的才能（個人演奏）
    {
      name: "ピアノ",
      criteria: function (scores) {
        return calculateLessonScore(scores, {
          musicalTalent: 20,
          fineMotorSkills: 10,
          patience: 5,
        });
      },
      reason: "音楽に興味があり、集中力と手先の器用さがあるお子様に適しています。",
    },
    // 音楽的才能（集団演奏）
    {
      name: "合唱",
      criteria: function (scores) {
        return calculateLessonScore(scores, {
          musicalTalent: 20,
          auditorySensitivity: 5,
          teamSpirit: 10,
        });
      },
      reason: "歌うことが好きで、協調性が高いお子様におすすめです。",
    },
    // アート的才能
    {
      name: "絵画",
      criteria: function (scores) {
        return calculateLessonScore(scores, {
          artTalent: 10,
          innovation: 5,
          attentionToDetail: 5,
        });
      },
      reason: "創造力が豊かで、細部にこだわるお子様に適しています。",
    },
    // 言語・博物学的才能
    {
      name: "英語",
      criteria: function (scores) {
        return calculateLessonScore(scores, {
          languageAptitude: 10,
          curiosity: 15,
        });
      },
      reason: "言葉に興味があり、新しいことを学ぶのが好きなお子様におすすめです。",
    },
    // STEM的才能
    {
      name: "プログラミング",
      criteria: function (scores) {
        return calculateLessonScore(scores, {
          STEMTalent: 20,
          problemSolving: 10,
        });
      },
      reason: "論理的思考が得意で、新しい技術に興味があるお子様に適しています。",
    },
    {
      name: "ロボット制作",
      criteria: function (scores) {
        return calculateLessonScore(scores, {
          STEMTalent: 20,
          problemSolving: 10,
          fineMotorSkills: 10,
        });
      },
      reason: "機械やものづくりが好きで、手先が器用なお子様におすすめです。",
    },
  ];

  // おすすめの習い事を選定
  const recommendedLessons = lessons
    .map((lesson) => {
      const score = lesson.criteria(scores);
      return { name: lesson.name, score: score, reason: lesson.reason };
    })
    .filter((lesson) => lesson.score > 0);

  if (recommendedLessons.length === 0) {
    return `<p class="no-result">申し訳ありませんが、適した習い事が見つかりませんでした。</p>`;
  }

  // 適性度でソートし、上位20件を取得
  recommendedLessons.sort((a, b) => b.score - a.score);
  const topLessons = recommendedLessons.slice(0, 20);

  // 結果を生成
  let result = `<h2>おすすめの習い事</h2><p><strong>${childName}さん（${childAge}歳、${childGender}）におすすめの習い事:</strong></p>`;
  result += `<ul>`;
  topLessons.forEach((lesson, index) => {
    const aptitudePercentage = Math.round(lesson.score * 100);
    result += `<li>${index + 1}位: ${lesson.name}: 適性度 <span class="score">${aptitudePercentage}%</span><br>理由: ${lesson.reason}</li><br>`;
  });
  result += `</ul>`;

  return result;
}

// スコア計算に使用する関数
function calculateLessonScore(scores, criteria) {
  let totalWeight = 0;
  let achievedScore = 0;

  // 各特性の最大スコアを設定
  const maxScores = {
    STEMTalent: 20,           // 質問44, 45, 46, 50の4問 × 5点 = 20点
    physicalTalent: 25,       // 質問60, 61, 62, 64, 65の5問 × 5点 = 25点
    musicalTalent: 25,        // 質問51, 52, 53, 54の4問 × 5点 + 質問6（最大5点）= 25点
    artTalent: 10,            // 質問55, 56の2問 × 5点 = 10点
    languageAptitude: 10,     // 質問48, 59の2問 × 5点 = 10点
    problemSolving: 10,       // 質問44, 46の2問 × 5点 = 10点
    innovation: 5,            // 質問55の1問 × 5点 = 5点
    agility: 5,               // 質問60の1問 × 5点 = 5点
    endurance: 5,             // 質問61の1問 × 5点 = 5点
    rhythmSense: 10,          // 質問52, 53の2問 × 5点 = 10点
    fineMotorSkills: 10,      // 質問49, 50の2問 × 5点 = 10点
    curiosity: 45,            // 素質診断の「頭脳」スコアを5倍したので最大45点
    heightAdvantage: 5,       // 質問1（0または1）×5点 = 5点
    teamSpirit: 10,           // 質問63, 65の2問 × 5点 = 10点
    handEyeCoordination: 5,   // 質問62の1問 × 5点 = 5点
    patience: 5,              // 質問56の1問 × 5点 = 5点
    auditorySensitivity: 5,   // 質問51の1問 × 5点 = 5点
    balance: 5,               // 質問11（0または1）×5点 = 5点
    extraversion: 10,         // 気質診断の外向性（質問37, 40の合計）
    attentionToDetail: 5,     // 質問58の1問 × 5点 = 5点
  };

  for (let key in criteria) {
    const weight = criteria[key];
    totalWeight += weight;
    let scoreValue = 0;

    // 各特性のスコアを取得
    if (key === "STEMTalent") {
      scoreValue = scores.talentScores["STEM的才能"] || 0;
    } else if (key === "physicalTalent") {
      scoreValue = scores.talentScores["運動的才能"] || 0;
    } else if (key === "musicalTalent") {
      scoreValue = scores.talentScores["音楽的才能"] || 0;
    } else if (key === "artTalent") {
      scoreValue = scores.talentScores["アート的才能"] || 0;
    } else if (key === "languageAptitude") {
      scoreValue = scores.talentScores["言語的才能"] || 0;
    } else if (key === "problemSolving") {
      scoreValue = scores.problemSolving || 0;
    } else if (key === "innovation") {
      scoreValue = scores.innovation || 0;
    } else if (key === "agility") {
      scoreValue = scores.agility || 0;
    } else if (key === "endurance") {
      scoreValue = scores.endurance || 0;
    } else if (key === "rhythmSense") {
      scoreValue = scores.rhythmSense || 0;
    } else if (key === "fineMotorSkills") {
      scoreValue = scores.fineMotorSkills || 0;
    } else if (key === "curiosity") {
      scoreValue = scores.aptitudeScores["頭脳"] || 0;
    } else if (key === "heightAdvantage") {
      scoreValue = scores.heightAdvantage * 5 || 0; // スケールを合わせる
    } else if (key === "teamSpirit") {
      scoreValue = scores.teamSpirit || 0;
    } else if (key === "handEyeCoordination") {
      scoreValue = scores.handEyeCoordination || 0;
    } else if (key === "patience") {
      scoreValue = scores.patience || 0;
    } else if (key === "auditorySensitivity") {
      scoreValue = scores.auditorySensitivity || 0;
    } else if (key === "balance") {
      const balanceScore = aptitudeAnswers[10] * 5; // 質問11の回答を5倍
      scoreValue = balanceScore || 0;
    } else if (key === "extraversion") {
      scoreValue = scores.traitScores.extraversion || 0;
    } else if (key === "attentionToDetail") {
      scoreValue = scores.attentionToDetail || 0;
    }

    // 最大スコアで正規化
    const maxScore = maxScores[key] || 10;
    const normalizedScore = Math.min(1, scoreValue / maxScore);
    achievedScore += normalizedScore * weight;
  }

  const finalScore = achievedScore / totalWeight;
  return finalScore;
}

// 気質評価を生成する関数
function generateTemperamentEvaluation(scores) {
  const traitScores = scores.traitScores;

  const temperamentScores = calculateTemperamentScores(traitScores);

  const highestTemperament = Object.keys(temperamentScores).reduce((a, b) =>
    temperamentScores[a] > temperamentScores[b] ? a : b
  );

  const temperamentDescriptions = {
    "天才気質": "新しいことに対して強い好奇心を持ち、創造力豊かです。独創的なアイデアを生み出す力があり、創造的な活動や発明に向いています。",
    "研究者気質": "非常に勤勉で、深い集中力を持っています。学問や研究に対して強い関心があり、難しい問題に対しても粘り強く取り組む姿勢があります。",
    "商人気質": "感情が安定しており、ストレスに強いです。商業やビジネスの分野での適性があります。",
    "パフォーマー気質": "外向的で社交的です。人前での表現やパフォーマンスに優れ、観客を引きつける力があります。",
    "共感者気質": "思いやりがあり、他人に対して親切です。協力やチームワークを重視し、友達との協調性が高いです。",
    "気質のまとめ": "バランスの取れた性格を持ち、創造力、集中力、社交性に優れています。商業やビジネス、パフォーマンス、協力的な活動など、多岐にわたる分野での活躍が期待されます。"
  };

  let temperamentResult = `<h3>お子様の気質評価：${highestTemperament}</h3>`;
  temperamentResult += `<p>${temperamentDescriptions[highestTemperament]}</p>`;

  return temperamentResult;
}

// 気質のスコアを計算する関数
function calculateTemperamentScores(traitScores) {
  const temperamentScores = {
    "天才気質": traitScores.openness,
    "研究者気質": traitScores.conscientiousness,
    "商人気質": traitScores.emotionalStability,
    "パフォーマー気質": traitScores.extraversion,
    "共感者気質": traitScores.agreeableness,
  };

  const scoresArray = Object.values(temperamentScores);
  const maxScore = Math.max(...scoresArray);
  const minScore = Math.min(...scoresArray);
  const scoreDifference = maxScore - minScore;

  if (scoreDifference <= 1) {
    return { "気質のまとめ": maxScore };
  }

  return temperamentScores;
}

// 才能評価を生成する関数
function generateTalentEvaluation(scores) {
  const talentScores = scores.talentScores;

  // 才能の説明文と最大スコアを設定
  const talentData = {
    "STEM的才能": {
      description: "立体パズルやオセロ、将棋など頭を使う遊びが好きで、計算が得意です。論理的思考や数学に優れており、科学や技術の分野で活躍できるでしょう。",
      maxScore: 20 // 質問44, 45, 46, 50の4問 × 5点 = 20点
    },
    "言語的才能": {
      description: "本を読むことや動物や昆虫について学ぶことが好きで、語彙が豊富です。言語や文学、自然科学に対する関心が高く、作家や研究者としての可能性があります。",
      maxScore: 10 // 質問48, 59の2問 × 5点 = 10点
    },
    "運動的才能": {
      description: "体を動かすことが好きで、バランス感覚が良く、動きが機敏です。スポーツや身体を使った活動に向いています。",
      maxScore: 25 // 質問60, 61, 62, 64, 65の5問 × 5点 = 25点
    },
    "音楽的才能": {
      description: "よく歌ったり、音楽やリズムに体が自然に反応します。音楽に対する感受性が高く、楽器の演奏や歌唱に才能があります。",
      maxScore: 25 // 質問51, 52, 53, 54の4問 × 5点 + 質問6（最大5点）= 25点
    },
    "アート的才能": {
      description: "絵を描いたり、デザインすることが好きで、図鑑や写真集、映像などを見るのが好きです。芸術やクリエイティブな分野での可能性があります。",
      maxScore: 10 // 質問55, 56の2問 × 5点 = 10点
    }
  };

  // 才能の評価を生成
  let talentResult = `<h3>お子様の才能評価：</h3><ul>`;
  for (let talent in talentData) {
    const score = talentScores[talent] || 0;
    const maxScore = talentData[talent].maxScore;
    const starRating = Math.round((score / maxScore) * 5); // 5段階評価に変換
    const stars = '★'.repeat(starRating) + '☆'.repeat(5 - starRating);
    talentResult += `<li><strong>${talent}：</strong> ${stars}<br>${talentData[talent].description}</li><br>`;
  }
  talentResult += `</ul>`;

  return talentResult;
}
</script>


    <!-- JavaScriptコードは前回提供したものを使用してください -->
  </body>
</html>
